(self.modernJsonp=self.modernJsonp||[]).push([["75454"],{914071:function(e,t,a){a.d(t,{Z:()=>r});var o=a(667294);function r(e,t){let a=(0,o.useRef)([]),[r,l]=(0,o.useState)(),[d,n]=(0,o.useReducer)(r??(()=>t),t),i=(0,o.useCallback)(t=>{r?n(t):(a.current.length||e().then(e=>{l(()=>e.default)}),a.current=[...a.current,t])},[e,r]);return(0,o.useEffect)(()=>{r&&(a.current.forEach(n),a.current=[])},[r]),[d,i]}},105433:function(e,t,a){a.d(t,{pb:()=>f,nf:()=>A,lV:()=>G});var o=a(667294),r=a(581722),l=a(441143),d=a.n(l),n=a(575108),i=a(729434),_=a(686319),s=a(791948),g=a(503246),m=a(991384);let u={feature_map:Object.freeze({})},E=(e,t)=>{let a={...(0,m.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,g.ZP)(e,a)?e:a},c=(e,t)=>{if(e=e||u,"FETCH_COMPLETE"===t.type){let{payload:{resource:a}}=t,{data:o}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===a||"AggregatedCommentReplyFeedResource"===a||"DidItCommentsResource"===a){let t=(o||[]).reduce((t,a)=>(t[a.id]=E(e[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsResource"===a&&o&&o.length>0){let t=o.filter(e=>"aggregatedcomment"===e.type).reduce((t,a)=>(t[a.id]=E(e[a.id],a),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===a&&o&&o.length>0){let t=o.map(e=>e.aggregated_comment).reduce((t,a)=>(a&&(t[a.id]=E(e[a.id],a)),t),{}),a=o.map(e=>e.creator_reply).reduce((t,a)=>(a&&a.id&&(t[a.id]=E(e[a.id],a)),t),{});return{...e,...t,...a}}if("AggregatedCommentFeaturesResource"===a&&o&&Object.keys(o).length>0)return{...e,feature_map:o}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:a}}=t;return a.id?{...e,[a.id]:a}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:a}}=t,o={...e};return delete o[a],o}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:a}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==a))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:a}}=t;return{...e,[a.id]:E(e?.[a.id],a)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:a}}=t,o=e?.[a.id],r=o?.reaction_counts[1]||0,l={1:a.reaction_by_me?r+1:r-1},d={...o,reaction_by_me:a.reaction_by_me,reaction_counts:l};return{...e,[a.id]:d}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:a}}=t,o=e?.[a.id],r=o?.helpful_count||0,l=a.marked_helpful_by_me?r+1:r-1,d={...o,marked_helpful_by_me:a.marked_helpful_by_me,helpful_count:l};return{...e,[a.id]:d}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:a}}=t,o={...e?.[a.aggregated_comment_id],highlighted_by_pin_owner:a.is_highlighted};return{...e,[a.aggregated_comment_id]:o}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:a}}}=t;return{...e,feature_map:{...e?.feature_map,...a}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:a,id:o}}=t,r=e?.[o];if(!r)return e;let l={...r,comment_count:r.comment_count+a};return{...e,[o]:l}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:a,tagged_users:o}}=t,r={...e?.[a],tagged_users:o};return{...e,[a]:r}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:a,translatedText:o}}=t,r={...e?.[a],translatedText:o};return{...e,[a]:r}}return e};var p=a(785893);let{Provider:T,get:y}=(0,i.Z)("AggregatedComments");function f({children:e}){let t=(0,r.v9)(({resources:e})=>e?.UnifiedCommentsResource),a=u;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),o=t?.reduce((e,t)=>(e[t.id]=E(a[t.id],t),e),{});a={...a,...o}});let[l,d]=(0,o.useReducer)(c,a),n=e=>{d({type:"FETCH_COMPLETE",payload:e})};(0,s.Z8)("AggregatedCommentFeaturesResource",n),(0,s.my)("AggregatedCommentFeaturesResource",n),(0,s.Z8)("AggregatedCommentFeedResource",n),(0,s.my)("AggregatedCommentFeedResource",n),(0,s.Z8)("AggregatedCommentReplyFeedResource",n),(0,s.my)("AggregatedCommentReplyFeedResource",n),(0,s.Z8)("DidItCommentsResource",n),(0,s.my)("DidItCommentsResource",n),(0,s.Z8)("UnifiedCommentsPreviewResource",n),(0,s.my)("UnifiedCommentsPreviewResource",n),(0,s.Z8)("UnifiedCommentsResource",n),(0,s.my)("UnifiedCommentsResource",n);let i=(0,o.useMemo)(()=>({aggregatedComments:l,dispatch:d}),[l,d]);return(0,p.jsx)(T,{value:i,children:e})}function A(){let{dispatch:e}=y();return(0,o.useMemo)(()=>({aggregatedCommentCreated(t,a){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:a}})},aggregatedCommentDeleted:(t,a)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:a}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:a,detailedReasons:o})=>{let r=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,_.Z)({url:r,method:"PUT",data:{commentId:t,reason:a,detailedReasons:o}})},deleteCommentMention:async t=>{let{resource_response:a}=await (0,_.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),o=a.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:o.id,tagged_users:o.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:a}=await (0,_.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),o=a.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:o}})}catch(a){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:a,orbacSubjectId:o})=>{(0,_.Z)({url:`/v3/helpful/1/${t}/`,method:a?"DELETE":"POST",data:o?{orbac_subject_id:o}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!a}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:a,isHighlighted:o})=>{d()(t,"Could not find comment"),d()(a,"Could not find Pin"),await (0,_.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:a,highlight:!o}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:a,is_highlighted:!o}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:a,orbacSubjectId:o})=>{(0,_.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:a?"DELETE":"POST",data:{reaction_type:1,...o?{orbac_subject_id:o}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!a}}})},updateAggregatedComment:async({commentId:t,force:a,orbacSubjectId:o,tags:r,text:l})=>{let{resource_response:d}=await n.Z.create("AggregatedCommentResource",{commentId:t,force:a,tags:r,text:l,...o?{orbacSubjectId:o}:{}}).callUpdate({showError:!1}),{tagged_users:i}=d.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:i.map(e=>({...e})),tags:JSON.parse(r),text:l}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:a,passcode:o,userConfirmPasscode:r})=>{let l={userId:t,featureMap:a,passcode:o,user_confirm_skip_passcode:r};void 0===r&&(l.user_confirm_skip_passcode=!1);let{resource_response:d}=await n.Z.create("AggregatedCommentFeaturesResource",l).callUpdate({showError:!1});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:d.data??Object.freeze({})}}})},updateCommentCount:(t,a)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:a,id:t}})}}),[e])}function G(){let{aggregatedComments:e}=y();return e}},502066:function(e,t,a){a.d(t,{G:()=>m,Kl:()=>u,vo:()=>g});var o=a(667294),r=a(729434),l=a(791948),d=a(914071),n=a(785893);let i=()=>a.e("83726").then(a.bind(a,3571)),{Provider:_,get:s}=(0,r.Z)("NativeEngagements");function g({children:e}){let[t,a]=(0,d.Z)(i,[]);(0,l.Z8)("NativeInteractionsResource",e=>{a({type:"FETCH_COMPLETE",payload:e})}),(0,l.my)("NativeInteractionsResource",e=>{a({type:"FETCH_MORE_COMPLETE",payload:e})});let r=(0,o.useMemo)(()=>({dispatch:a,nativeEngagements:t}),[a,t]);return(0,n.jsx)(_,{value:r,children:e})}function m(){let{dispatch:e}=s();return(0,o.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function u(){let{nativeEngagements:e}=s();return e}},151594:function(e,t,a){a.d(t,{A:()=>n,w:()=>i});var o=a(667294),r=a(729434),l=a(785893);let{Provider:d,get:n}=(0,r.Z)("Session");function i({children:e}){let[t,a]=(0,o.useState)(void 0),r=(0,o.useCallback)(()=>a(void 0),[]),n=(0,o.useMemo)(()=>({unauthFollowUserId:t,setUnauthFollowUserId:a,removeUnauthFollowUserId:r}),[t,r]);return(0,l.jsx)(d,{value:n,children:e})}},732347:function(e,t,a){a.d(t,{N4:()=>l,Wh:()=>o,hr:()=>r});let o=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),r=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),l=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/75454-802c5096e34d357e.mjs.map