(self.modernJsonp=self.modernJsonp||[]).push([["77623"],{454387:function(e,t,i){i.r(t),i.d(t,{default:()=>r});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoWithContextLogging_pin",selections:[{args:null,kind:"FragmentSpread",name:"VideoWrapper_pin"}],type:"Pin",abstractKey:null};n.hash="93ed23334d5bac81ac8410f05c4f2031";let r=n},67484:function(e,t,i){i.d(t,{K:()=>a,Q:()=>o});var n=i(667294);let r=(0,n.createContext)(null),o=r;function a(){let e=(0,n.useContext)(r);return e?.featuredCommentId}},111923:function(e,t,i){i.d(t,{Z:()=>u});var n=i(581722),r=i(575108),o=i(105433),a=i(542092),s=i(611134),l=i(189976),d=i(800300),h=i(696323);let c={[a.o.aggregatedComment]:"AggregatedCommentReplyResource",[a.o.pin]:"AggregatedCommentResource",[a.o.didIt]:"DidItCommentsResource"};function u(){let e=(0,n.I0)(),{aggregatedCommentCreated:t,updateCommentCount:i}=(0,o.nf)();return async({commentMedia:n,force:o=!0,fromUnifiedComment:a,objectId:u,objectType:m,orbacSubjectId:_,pinId:p,replyToCommentId:T,tags:g,text:y})=>{let E=c[m],f={force:o,objectId:u,pinId:p,tags:g,text:y,replyToCommentId:T,..._?{orbacSubjectId:_}:{},...n?{commentMedia:n}:{}},v=h.Z.AGGREGATED_COMMENTS;a&&(v="pin"===m?h.Z.UNIFIED_COMMENTS:h.Z.AGGREGATED_COMMENT_REPLIES);let I=await r.Z.create(E,f).callCreate({showError:!1}),D=I.resource_response.data;return t(u,D),e((0,l.vX)({feedType:v,feedId:u,itemIds:[D.id],itemType:D.type,prepend:!0})),"aggregatedComment"===m?i(u,1):"didIt"===m&&e((0,s.L8)(u,1)),p&&e((0,d.R)(p,1)),D.id||I}}},162321:function(e,t,i){i.d(t,{Z:()=>a});var n=i(667294),r=i(20256),o=i(785893);let a=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:i,marginBottom:a,marginEnd:s,shouldShowFirstNameOnly:l,size:d,tags:h,taggedUsers:c,text:u})=>{let m=(0,n.useRef)(null),_=(e,t)=>(0,o.jsx)(r.xv,{inline:!0,overflow:"normal",size:d,children:(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:i,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t);return(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:a}},children:(()=>{if(!h.length||!c||h.length!==c.length)return _(u,"1");let n=0,a=[];return h.forEach((i,s)=>{let h=u.substring(n,i.offset);n=i.offset+i.length;let m=u.substring(i.offset,n);a=a.concat(_(h,`${s}a`)).concat(((i,n,a,s)=>{let h=l||0===a&&t?c[a].first_name||c[a].username[0]:n;return(0,o.jsx)(r.xv,{color:i,inline:!0,overflow:"normal",size:d,weight:"bold",children:e?h:(0,o.jsx)(r.rU,{display:"inlineBlock",href:`/${c[a].username}`,underline:"hover",children:h})},s)})(i.color,m,s,`${s}b`))}),a=a.concat(_(u.substring(n),"2")),(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:i}},display:l?"flex":void 0,marginEnd:s??3,position:"relative",children:(0,o.jsx)(r.xv,{ref:m,inline:!0,lineClamp:e?1:void 0,size:d,children:a})})})()})}},296691:function(e,t,i){i.d(t,{A9:()=>p,F1:()=>A,Ff:()=>w,G5:()=>b,G_:()=>D,Gu:()=>I,LH:()=>s,Rv:()=>c,TJ:()=>m,Ty:()=>o,WU:()=>y,XU:()=>h,_q:()=>M,i$:()=>E,iB:()=>a,je:()=>l,mi:()=>R,o:()=>g,pW:()=>_,qJ:()=>N,ql:()=>T,sp:()=>P,uC:()=>d,xA:()=>u,yQ:()=>C,yW:()=>v,zs:()=>f});var n=i(20256),r=i(473728);let o=new n.Ry(3),a=48,s=56,l="sm",d=500,h=1,c=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),u=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),m="comment_featured_ids",_="did_it_featured_ids",p={NONE:"none",WARNING:"warning",BLOCK:"block"},T="https://s.pinimg.com/images/user/default_75.png",g="transparent",y="#efefef",E=(e,t)=>e?(0,r.Z)(t.ngettext('{{ count }} Comment', '{{ count }} Comments', e, 'closeup.commentThread.heading.commentCount', 'Comment count on a Pin. count: number of comments'),{count:e.toString()}):t._('No comments yet', 'closeup.commentThread.heading.noComments', 'Prompt for user to comment on Pin'),f=(e,t,i,n)=>{let r=t.map(t=>({...t,offset:(t.offset||0)+(n?0:e.length+1),color:"shopping"}));return n?r:[{offset:0,length:e.length,color:i?"light":"dark"},...r]},v=e=>e._('Insight heading icon', 'closeupCommentModuleHeading.icon', 'Icon displayed in the comment module heading'),I=e=>e._('No comments yet', 'emptyCommentThread.noComments.heading', 'Text shown when there are no comments yet'),D=e=>e._('Post', 'commentComposer.button.post', 'Post new comment'),w=e=>e._('posted a photo', 'comment.preview.text.photo', 'Comment preview text for an image that a user posted'),A=e=>e._('posted a sticker', 'comment.preview.text.sticker', 'Comment preview text for a sticker that a user posted'),b=e=>e._('Select an emoji', 'emojitray.button.accessibilityLabel', 'Accessibility label for emoji tray button'),R=e=>e._('Select a photo', 'photoModal.button.accessibilityLabel', 'Accessibility label for photo modal button'),P=e=>e._('Select a sticker', 'stickerTray.button.accessibilityLabel', 'Accessibility label for sticker tray button'),C=e=>e._('Text editor', 'EditorWithMentions.container', 'Tappable area for the editor container'),M=e=>e._('Top Comment', 'closeupCommentModuleHeading.heading.topComment', 'Top Comment heading for the comment module'),N=e=>[b(e),R(e),D(e),P(e),C(e)]},654937:function(e,t,i){i.d(t,{A5:()=>o,ZP:()=>a,kH:()=>n});let n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:"year_short_month_day_time_timezone",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year",NUMERIC_WITH_TIME:"numeric_with_time",NUMERIC_WITH_TIME_TIMEZONE:"numeric_with_time_timezone"},r=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.YEAR_SHORT_MONTH_DAY_TIME_TIMEZONE:return{month:"short",year:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};case n.NUMERIC_WITH_TIME:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit"};case n.NUMERIC_WITH_TIME_TIMEZONE:return{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};default:throw Error('invalid dateFormatType "'+e+'"')}};function o(){return -1!==Intl.DateTimeFormat.toString().indexOf("[native code]")}function a(e,t,i,n=!0,s){let l=r(i);return n?l.timeZone="UTC":s&&(l.timeZone=s),o()||(l.calendar="gregory"),new Intl.DateTimeFormat(e,l).format(t)}},460584:function(e,t,i){i.d(t,{Z:()=>n});function n(e){let t=!1;return{promise:new Promise((i,n)=>{e.then(e=>t?n({isCanceled:!0}):i(e),e=>t?n({isCanceled:!0}):n(e))}),cancel(){t=!0}}}},665827:function(e,t,i){i.d(t,{Z:()=>n});let n=e=>{if(!e)return null;let{rich_metadata:t}=e.pin;return t?{...e,richMetadata:t}:null}},176465:function(e,t,i){i.d(t,{Z:()=>n});let n=e=>e?.pin?.id?e:null},796765:function(e,t,i){i.d(t,{Z:()=>o});var n=i(667294),r=i(460584);function o(){let e=(0,n.useRef)([]),t=(0,n.useRef)({});return(0,n.useEffect)(()=>()=>{[...Object.keys(t.current).map(e=>t.current[e]),...e.current].forEach(e=>e())},[]),function(i,n){if(n){let e=t.current[n];e&&(e(),delete t.current[n])}let{cancel:o,promise:a}=(0,r.Z)(i);return n?t.current[n]=o:e.current=[...e.current,o],a}}},542092:function(e,t,i){i.d(t,{n:()=>r,o:()=>n});let n={aggregatedComment:"aggregatedComment",didIt:"didIt",pin:"pin"},r={aggregatedComment:"aggregatedcomment",didIt:"userdiditdata",pin:"pin"}},149728:function(e,t,i){i.d(t,{Z:()=>s});var n=i(667294),r=i(20256),o=i(280670),a=i(785893);let s=function({badgeSize:e,badgeSpacing:t,fullName:i,isVerifiedIdentity:s,isVerifiedMerchant:l,truncate:d=!1,size:h="200"}){let c=i.split(" "),u=c.slice(0,c.length-1).join(" "),m=" ".concat(c[c.length-1]);return d?(0,a.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,a.jsx)(r.xv,{lineClamp:1,size:h,weight:"bold",children:i}),(0,a.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{top:t}},flex:"none",paddingX:1,position:"relative",children:(0,a.jsx)(o.Z,{isVerifiedIdentity:s,isVerifiedMerchant:l,size:e})})]}):(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)("span",{children:u}),(0,a.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[m,"Â ",(0,a.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{top:t}},display:"inlineBlock",flex:"none",position:"relative",children:(0,a.jsx)(o.Z,{isVerifiedIdentity:s,isVerifiedMerchant:l,size:e})})]})]})}},611134:function(e,t,i){i.d(t,{YH:()=>l,IU:()=>m,DD:()=>c,L8:()=>h,lg:()=>u,Th:()=>_,wH:()=>s});var n=i(575108),r=i(686319),o=i(189976),a=i(696323);function s({didItDataId:e,isLikedByMe:t,orbacSubjectId:i}){return n=>((0,r.Z)({url:`/v3/did_it/${e}/like/`,method:t?"DELETE":"POST",data:i?{orbac_subject_id:i}:{}}),n({type:"USER_DID_IT_DATA_LIKE_TOGGLED",payload:{id:e,liked_by_me:!t}}))}function l({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:i}){return n=>((0,r.Z)({url:`/v3/helpful/2/${e}/`,method:t?"DELETE":"POST",data:i?{orbac_subject_id:i}:{}}),n({type:"USER_DID_IT_DATA_HELPFUL_TOGGLED",payload:{id:e,marked_helpful_by_me:!t}}))}function d(e){return{type:"USER_DID_IT_DATA_DELETE",payload:{id:e}}}function h(e,t){return{type:"USER_DID_IT_DATA_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}function c({aggregatedPinDataId:e,details:t,fromUnifiedComment:i,image_signatures:r,pin_id:s,username:l,updateParentDidItCount:d}){let c={aggregatedPinDataId:e,details:t,image_signatures:r,pin_id:s};return t=>n.Z.create("DidItActivityResource",c).callCreate().then(n=>{let r=n.resource_response.data;t({type:"PIN_DID_IT",payload:{id:s,value:!0}}),t({type:"USER_DID_IT_DATA_CREATE",payload:{user_did_it_data:r}}),t((0,o.vX)({feedId:e,feedType:i?a.Z.UNIFIED_COMMENTS:a.Z.TRIED_IT_FEED,itemIds:[r.id],itemType:r.type,prepend:!0})),t((0,o.vX)({feedId:l,feedType:a.Z.TRIED_IT_FEED,itemIds:[r.id],itemType:r.type})),d&&t(h(e,1))},()=>{})}function u({aggregatedPinDataId:e,feedType:t,id:i,isOwnedByMe:r,pinId:s,username:l,updateParentDidItCount:c}){return u=>{n.Z.create("DidItActivityResource",{user_did_it_data_id:i,pinId:s}).callDelete().then(()=>{r&&u({type:"PIN_DID_IT",payload:{id:s,value:!1}}),u(d(i)),u((0,o.EX)({feedId:e??"",feedType:t||a.Z.TRIED_IT_FEED,itemIds:[i],itemType:"userdiditdata"})),u((0,o.EX)({feedId:l,feedType:a.Z.TRIED_IT_FEED,itemIds:[i],itemType:"userdiditdata"})),u((0,o.EX)({feedId:l,feedType:a.Z.UNIFIED_COMMENTS,itemIds:e?[e]:[],itemType:"userdiditdata"})),c&&u(h(i,-1))},()=>{})}}function m({id:e,details:t,image_signatures:i,pinId:r}){let o={details:t,image_signatures:i,user_did_it_data_id:e,pin_id:r};return e=>{n.Z.create("DidItActivityResource",o).callUpdate().then(t=>{e({type:"USER_DID_IT_DATA_UPDATE",payload:{user_did_it_data:t.resource_response.data}})},()=>{})}}function _(e,t,i,n,s){return l=>{(0,r.Z)({url:`/v3/did_it/${i}/flag/`,method:"PUT",data:{reason:n,detailed_reasons:t,explanation:void 0}}).then(()=>{l(d(i)),e&&l((0,o.EX)({feedId:e,feedType:a.Z.TRIED_IT_FEED,itemIds:[i],itemType:"userdiditdata"})),l((0,o.EX)({feedId:s,feedType:a.Z.TRIED_IT_FEED,itemIds:[i],itemType:"userdiditdata"}))},()=>{})}}},800300:function(e,t,i){i.d(t,{R:()=>n});function n(e,t){return{type:"PIN_UPDATE_COMMENT_COUNT",payload:{id:e,increment:t}}}},720445:function(e,t,i){i.d(t,{ZP:()=>P});var n,r=i(667294);i(422578);var o=i(20256),a=i(980787),s=i(289032),l=i(415546),d=i(115247),h=i(274320),c=i(15667),u=i(149026),m=i(792171),_=i(589357),p=i(603316),T=i(78762),g=i(785893);function y(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let E=(0,T.Z)(()=>Promise.all([i.e("25418"),i.e("22244"),i.e("77779"),i.e("31142")]).then(i.bind(i,509691)),void 0,e=>509691,"app-www-video-VideoWrapper"),f=[0,.25,.5,.75,.95,.97],v=[0,.5,.8,.99,1],I={rootMargin:"-64px 0px 0px 0px",threshold:[..._.iM]},D=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3}),w=(void 0!==n||(n=i(454387)).hash&&"93ed23334d5bac81ac8410f05c4f2031"!==n.hash&&console.error("The definition of 'VideoWithContextLogging_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function A(){return new Date().getTime()}function b(e){return!!e.volume&&e.volume>0}class R extends r.Component{constructor(e){super(e),y(this,"videoWrapperRef",(0,r.createRef)()),y(this,"handleWindowResize",()=>{if(!this.fullscreen){let e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?(this.lastLoggedTime.startTime=0,this.startNewInterval(e)):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),y(this,"handlePlayheadDown",({event:e})=>{let{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),y(this,"handlePlayheadUp",({event:e})=>{let{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),y(this,"handleLoop",()=>{this.videoTime=0}),y(this,"handlePlaying",e=>{this.logVideoStart(),this.props.onPlaying&&this.props.onPlaying(e)}),y(this,"handleTimeChange",e=>{let{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;let n=1e3*e.time,r=function(e,t,i,n){if(e>t||i<=0)return null;for(let r of n){let n=r*i;if(e<=n&&t>n)return r}return null}(this.videoTime,n,this.currentInterval.videoDuration,f);if("number"==typeof r&&this.props.playing&&!t&&i){let e=A();this.props.isMetricThrottleExpEnabled?this.isVideoEventLogIntervalMet("currentTime")&&this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*r),quartilePercentValue:r}):this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*r),quartilePercentValue:r})}this.videoTime=n,this.props.onTimeChange&&this.props.onTimeChange(e)}),y(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),y(this,"handleReady",e=>{let{ready:t}=this.state;t||(this.lastLoggedTime.startTime=0,this.setState({ready:!0})),this.props.onReady&&this.props.onReady(e)}),y(this,"handleEnded",e=>{this.props.isMetricThrottleExpEnabled?this.isVideoEventLogIntervalMet("endTime")&&this.logFourthQuartileEvent():this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),y(this,"handleVisibilityChange",e=>{if(0===e.length)return;let t=function(e){for(let t=0;t<v.length;t+=1){let i=v[t],n=v[t+1];if(null==n||i<=e&&e<n)return i}return null}(Number.parseFloat(e.slice(-1)[0].intersectionRatio.toFixed(2)));"number"==typeof t&&(this.visible=t>=.5),null==t||t===this.currentInterval.viewability||this.fullscreen||(0===t?this.startNewInterval({viewability:t,playbackState:D.PAUSED}):this.startNewInterval({viewability:t}))}),y(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){let{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),y(this,"handleClose",()=>{this.startNewInterval()}),this.state={ready:!1,seeking:!1,started:!1};let t=A();this.handleWindowResize=(0,s.Z)(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:b(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null,this.lastLoggedTime={startTime:0,endTime:0,currentTime:0}}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){let i={};b(e)&&!b(this.props)?i.isAudible=!1:!b(e)&&b(this.props)&&(i.isAudible=!0);let n=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==n&&(i.playbackState=n),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?D.PLAYING:D.PAUSED:D.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){let i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logMetricStat(e){let{requestContext:t}=this.props,i=t?.userAgent||{},n={appType:i.isMobile||i.isTablet?"WEB_MOBILE":"WEB_DENZEL",country:t?.country??"unknown",browserName:i.browserName,osName:i.osName,browserType:i.browserType,browserVersion:i.browserVersion,type:e};(0,p.nP)("webapp.metrics.videoLogging.skippedEvents",{tags:n})}isVideoEventLogIntervalMet(e){let t=A();return 250>Math.abs(t-this.lastLoggedTime[e])?(this.logMetricStat(e),!1):(this.lastLoggedTime[e]=t,!0)}logVideoEvent(e,t){let{closeupStoryPinViewability:i,contextLogData:n,logContextEvent:r,playing:o,surface:a}=this.props,{seeking:s}=this.state,{height:l,width:d,windowHeight:h,windowWidth:c,viewability:u,...m}=t;if(null!=l&&null!=d&&null!=h&&null!=c&&null!=u){let t={...m,gridAutoplay:6904===e&&o&&!s&&("AuthHomefeed"===a||"SearchItem"===a||"RelatedPinGrid"===a||"PdpRelatedPinGrid"===a),height:l,width:d,windowHeight:h,windowWidth:c,viewability:i||u};r({event_type:e,...function(e){let{eventData:{videoEvent:{gridAutoplay:t,videoDuration:i,startTime:n,endTime:r,videoStartTime:o,videoEndTime:a,isAudible:s,height:l,width:d,playbackState:h,quartile:c,quartilePercentValue:u,windowHeight:m,windowWidth:_,viewability:p}},component:T,objectId:g,view:y,viewParameter:E,...f}=e;return{component:T,object_id_str:g,view_type:y,view_parameter:E,aux_data:{...f},event_data:{videoEventData:{gridAutoplay:t,videoDuration:i?Math.floor(i):0,time:n,endTime:r,videoTime:o?Math.floor(o):0,endVideoTime:a?Math.floor(a):0,isAudible:s,height:l,width:d,playbackState:h,quartile:c,quartilePercentValue:u,windowHeight:m,windowWidth:_,viewability:p}}}}({...n,view:this.fullscreen?108:n.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){let e=A();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}logVideoStart(){if(this.state.started)return;let{contextLogData:e,setVideoPlayed:t,shouldLogVideoStart:i}=this.props;if(i){let e=A();this.logVideoEvent(3621,{...this.currentInterval,startTime:e,endTime:e,videoEndTime:this.videoTime})}t(e.objectId),this.setState({started:!0})}startNewInterval(e){let t=A();this.props.isMetricThrottleExpEnabled?this.isVideoEventLogIntervalMet("startTime")&&this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}):this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){let{rootMargin:e,surface:t,aspectRatio:i,backgroundColor:n,captions:r,contextLogData:a,controls:s,fallback:l,hlsConfig:h,isAutoPlay:c,loop:m,objectFit:_,onLoadedChange:p,onControlsPause:T,onControlsPlay:y,onSeek:f,onVolumeChange:v,pin:D,playbackRate:w,playing:A,playsInline:b,poster:R,preload:P,seekTime:C,src:M,videoStartTime:N,volume:S,video:O,variant:x}=this.props,{seeking:L}=this.state;return void 0!==e&&(I.rootMargin=t?(0,u.eL)(t):e),(0,g.jsx)(d.Z,{onVisibilityChange:this.handleVisibilityChange,options:I,children:e=>(0,g.jsx)(o.xu,{ref:t=>{e.current=t,this.videoWrapperRef.current=t},height:"inherit",children:(0,g.jsx)(E,{aspectRatio:i,backgroundColor:n,captions:r,contextLogData:a,controls:s,fallback:l,hlsConfig:h,isAutoPlay:c,loop:m,objectFit:_,onControlsPause:T,onControlsPlay:y,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:p,onLoop:this.handleLoop,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onPlaying:this.handlePlaying,onReady:this.handleReady,onSeek:f,onTimeChange:this.handleTimeChange,onVolumeChange:v,pinKey:D,playbackRate:w,playing:!L&&A,playsInline:b,poster:R,preload:P,seekTime:C,src:M,variant:x,video:O,videoStartTime:N,visible:this.visible,volume:S})})})}}function P(e){let{pinKey:t}=e,i=(0,l.Z)(w,t),{logContextEvent:n}=(0,a.u)(),{checkExperiment:r}=(0,h.r)(),{setVideoPlayed:o}=(0,m.H)(),s=r("web_video_start_log").anyEnabled,d=r("web_metric_video_throttle").anyEnabled,u=(0,c.B)();return(0,g.jsx)(R,{...e,isMetricThrottleExpEnabled:d,logContextEvent:n,pin:i,requestContext:u,setVideoPlayed:o,shouldLogVideoStart:s})}y(R,"defaultProps",o.nk.defaultProps)},589357:function(e,t,i){i.d(t,{Ul:()=>o,VS:()=>n,hy:()=>a,iM:()=>r,j4:()=>s});let n=2,r=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],o={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},a=128,s=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/77623-9347fd55360109fc.mjs.map